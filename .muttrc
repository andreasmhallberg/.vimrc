# symlink to ~/.muttrc
# {{{ colorscheme
source ~/.mutt/mutt-colors-solarized/mutt-colors-solarized-dark-256.muttrc

set realname = "Andreas Hallberg"

set ssl_starttls=yes
set ssl_force_tls=yes

# {{{ Accounts

# Folder hooks
folder-hook 'account.com.gmail.andreasmartenhallber' 'source ~/.mutt/account.com.gmail.andreasmartenhallberg'
folder-hook 'account.gu.se.andreas.hallberg' 'source ~/.mutt/account.gu.se.andreas.hallberg'

# Default account
source ~/.mutt/account.com.gmail.andreasmartenhallberg  

# Macros for switching accounts
macro index <f2> '<sync-mailbox><enter-command>source ~/.mutt/account.com.gmail.andreasmartenhallberg<enter><change-folder>!<enter>'
macro index <f3> '<sync-mailbox><enter-command>source ~/.mutt/account.gu.se.andreas.hallberg<enter><change-folder>!<enter>'

set use_from=yes

set fast_reply # Don't ask for reciever or subject when replying to email.
set include # Always include original message in reply. Don't ask.
set recall=no # Don't ask to recall postponed messages.
set editor='mvim -v +"call SweType()" +"norm }o"' # Since vanilla Vim does not have all features.
set smtp_authenticators = 'gssapi:login'
set sort = reverse-date-received


# aliases
# set alias_file= ~/.mutt/aliases
set sort_alias= alias
set reverse_alias=yes
# source $alias_file
source ~/.mutt/aliases.jobb
source ~/.mutt/aliases.privat
source ~/.mutt/aliases.lists


# html rendering
auto_view text/html                                  # View html automatically.
alternative_order text/plain text/enriched text/html # Save html for last.

macro pager l |urlview\n
unset markers # Remove ugly markers at linebreaks.
set text_flowed=yes # Let reciever reflow text.
set timeout=30

# Edit e-mail headers in editor. Attach files by adding line Attach: <path>
set edit_headers=yes

# save attatchemts - give path to home direcotry
macro attach s <save-entry><kill-line>~/ 

# mail indexing format
# Indicate with A if email has attachment. 
# See https://stackoverflow.com/questions/37080414/show-if-a-message-in-the-mutt-index-has-an-attachment
set index_format="%3C %S %?X?A& ? %{%y%m%d} %-12.12L %?M?(#%03M)&(%4c)? %?y?(%.20Y) ?%s"

# {{{ Bindings
# bind <mode> <key> <action>
bind pager h noop # Often hit by mistake
bind index h noop # Often hit by mistake
bind pager j next-line # vim-like
bind pager k previous-line # vim-like
bind index G imap-fetch-mail
bind index g group-reply # vim-like
bind generic,index,pager    \Cf next-page # vim-like
bind generic,index,pager \Cb previous-page # vim-like
